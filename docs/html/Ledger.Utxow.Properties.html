<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Utxow.Properties</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>

<a id="25" class="Keyword">import</a> <a id="32" href="Data.Maybe.html" class="Module">Data.Maybe</a> <a id="43" class="Symbol">as</a> <a id="46" class="Module">M</a>
<a id="48" class="Keyword">open</a> <a id="53" class="Keyword">import</a> <a id="60" href="Data.Product.html" class="Module">Data.Product</a> <a id="73" class="Keyword">using</a> <a id="79" class="Symbol">(</a><a id="80" href="Data.Product.Base.html#1853" class="Function">map₂</a><a id="84" class="Symbol">)</a>

<a id="87" class="Keyword">open</a> <a id="92" class="Keyword">import</a> <a id="99" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="114" class="Keyword">open</a> <a id="119" class="Keyword">import</a> <a id="126" href="Ledger.Crypto.html" class="Module">Ledger.Crypto</a>
<a id="140" class="Keyword">open</a> <a id="145" class="Keyword">import</a> <a id="152" href="Ledger.Abstract.html" class="Module">Ledger.Abstract</a>
<a id="168" class="Keyword">open</a> <a id="173" class="Keyword">import</a> <a id="180" href="Ledger.Transaction.html" class="Module">Ledger.Transaction</a>

<a id="200" class="Keyword">module</a> <a id="207" href="Ledger.Utxow.Properties.html" class="Module">Ledger.Utxow.Properties</a>
  <a id="233" class="Symbol">(</a><a id="234" href="Ledger.Utxow.Properties.html#234" class="Bound">txs</a> <a id="238" class="Symbol">:</a> <a id="240" class="Symbol">_)</a> <a id="243" class="Symbol">(</a><a id="244" class="Keyword">open</a> <a id="249" href="Ledger.Transaction.html#878" class="Module">TransactionStructure</a> <a id="270" href="Ledger.Utxow.Properties.html#234" class="Bound">txs</a><a id="273" class="Symbol">)</a>
  <a id="277" class="Symbol">(</a><a id="278" href="Ledger.Utxow.Properties.html#278" class="Bound">abs</a> <a id="282" class="Symbol">:</a> <a id="284" href="Ledger.Abstract.html#437" class="Record">AbstractFunctions</a> <a id="302" href="Ledger.Utxow.Properties.html#234" class="Bound">txs</a><a id="305" class="Symbol">)</a> <a id="307" class="Symbol">(</a><a id="308" class="Keyword">open</a> <a id="313" href="Ledger.Abstract.html#437" class="Module">AbstractFunctions</a> <a id="331" href="Ledger.Utxow.Properties.html#278" class="Bound">abs</a><a id="334" class="Symbol">)</a>
  <a id="338" class="Keyword">where</a>

<a id="345" class="Keyword">open</a> <a id="350" class="Keyword">import</a> <a id="357" href="Ledger.Utxow.html" class="Module">Ledger.Utxow</a> <a id="370" href="Ledger.Utxow.Properties.html#234" class="Bound">txs</a> <a id="374" href="Ledger.Utxow.Properties.html#278" class="Bound">abs</a>
<a id="378" class="Keyword">open</a> <a id="383" class="Keyword">import</a> <a id="390" href="Ledger.Utxo.html" class="Module">Ledger.Utxo</a> <a id="402" href="Ledger.Utxow.Properties.html#234" class="Bound">txs</a> <a id="406" href="Ledger.Utxow.Properties.html#278" class="Bound">abs</a>

<a id="411" class="Keyword">instance</a>
  <a id="Computational-UTXOW"></a><a id="422" href="Ledger.Utxow.Properties.html#422" class="Function">Computational-UTXOW</a> <a id="442" class="Symbol">:</a> <a id="444" href="Interface.ComputationalRelation.html#627" class="Record">Computational</a> <a id="458" href="Ledger.Utxow.html#1216" class="Datatype Operator">_⊢_⇀⦇_,UTXOW⦈_</a>
  <a id="475" href="Ledger.Utxow.Properties.html#422" class="Function">Computational-UTXOW</a> <a id="495" class="Symbol">=</a> <a id="497" class="Keyword">record</a> <a id="504" class="Symbol">{</a><a id="505" href="Ledger.Utxow.Properties.html#530" class="Module">go</a><a id="507" class="Symbol">}</a> <a id="509" class="Keyword">where</a> <a id="515" class="Keyword">private</a> <a id="523" class="Keyword">module</a> <a id="530" href="Ledger.Utxow.Properties.html#530" class="Module">go</a> <a id="533" href="Ledger.Utxow.Properties.html#533" class="Bound">Γ</a> <a id="535" href="Ledger.Utxow.Properties.html#535" class="Bound">s</a> <a id="537" href="Ledger.Utxow.Properties.html#537" class="Bound">tx</a> <a id="540" class="Keyword">where</a>
    <a id="550" href="Ledger.Utxow.Properties.html#550" class="Function">UTXOW-premise</a> <a id="564" class="Symbol">:</a> <a id="566" href="Agda.Primitive.html#320" class="Primitive">Set</a>
    <a id="574" href="Ledger.Utxow.Properties.html#550" class="Function">UTXOW-premise</a> <a id="588" class="Symbol">=</a>
      <a id="596" class="Keyword">let</a> <a id="600" class="Keyword">open</a> <a id="605" href="Ledger.Transaction.html#4647" class="Module">Tx</a> <a id="608" href="Ledger.Utxow.Properties.html#537" class="Bound">tx</a> <a id="611" class="Keyword">renaming</a> <a id="620" class="Symbol">(</a><a id="621" href="Ledger.Transaction.html#4672" class="Field">body</a> <a id="626" class="Symbol">to</a> <a id="629" class="Field">txb</a><a id="632" class="Symbol">);</a> <a id="635" class="Keyword">open</a> <a id="640" href="Ledger.Transaction.html#3692" class="Module">TxBody</a> <a id="647" href="Ledger.Utxow.Properties.html#629" class="Field">txb</a><a id="650" class="Symbol">;</a> <a id="652" class="Keyword">open</a> <a id="657" href="Ledger.Transaction.html#4392" class="Module">TxWitnesses</a> <a id="669" href="Ledger.Transaction.html#4700" class="Field">wits</a>
          <a id="684" class="Keyword">open</a> <a id="689" href="Ledger.Utxo.html#6028" class="Module">UTxOState</a> <a id="699" href="Ledger.Utxow.Properties.html#535" class="Bound">s</a><a id="700" class="Symbol">;</a> <a id="702" class="Keyword">open</a> <a id="707" href="Ledger.Utxo.html#5871" class="Module">UTxOEnv</a> <a id="715" href="Ledger.Utxow.Properties.html#533" class="Bound">Γ</a>
          <a id="727" href="Ledger.Utxow.Properties.html#727" class="Bound">witsKeyHashes</a>     <a id="745" class="Symbol">=</a> <a id="747" href="Ledger.Set.Theory.html#442" class="Function">mapˢ</a> <a id="752" href="Interface.Hashable.html#195" class="Field">hash</a> <a id="757" class="Symbol">(</a><a id="758" href="Interface.IsSet.html#794" class="Function">dom</a> <a id="762" href="Ledger.Transaction.html#4426" class="Function">vkSigs</a><a id="768" class="Symbol">)</a>
          <a id="780" href="Ledger.Utxow.Properties.html#780" class="Bound">witsScriptHashes</a>  <a id="798" class="Symbol">=</a> <a id="800" href="Ledger.Set.Theory.html#442" class="Function">mapˢ</a> <a id="805" href="Interface.Hashable.html#195" class="Field">hash</a> <a id="810" href="Ledger.Transaction.html#4458" class="Function">scripts</a>
      <a id="824" class="Keyword">in</a>
        <a id="835" class="Symbol">(</a><a id="836" href="Interface.IsSet.html#611" class="Function">∀[</a> <a id="839" href="Ledger.Utxow.Properties.html#839" class="Bound">(</a><a id="840" href="Ledger.Utxow.Properties.html#840" class="Bound">vk</a> <a id="843" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="845" href="Ledger.Utxow.Properties.html#845" class="Bound">σ</a><a id="846" href="Ledger.Utxow.Properties.html#839" class="Bound">)</a> <a id="848" href="Interface.IsSet.html#611" class="Function">∈</a> <a id="850" href="Ledger.Transaction.html#4426" class="Function">vkSigs</a> <a id="857" href="Interface.IsSet.html#611" class="Function">]</a> <a id="859" href="Ledger.Crypto.html#790" class="Function">isSigned</a> <a id="868" href="Ledger.Utxow.Properties.html#840" class="Bound">vk</a> <a id="871" class="Symbol">(</a><a id="872" href="Ledger.Transaction.html#2676" class="Field">txidBytes</a> <a id="882" href="Ledger.Transaction.html#4245" class="Function">txid</a><a id="886" class="Symbol">)</a> <a id="888" href="Ledger.Utxow.Properties.html#845" class="Bound">σ</a><a id="889" class="Symbol">)</a>
      <a id="897" href="Data.Product.Base.html#1109" class="Function Operator">×</a> <a id="899" class="Symbol">(</a><a id="900" href="Interface.IsSet.html#611" class="Function">∀[</a> <a id="903" href="Ledger.Utxow.Properties.html#903" class="Bound">s</a> <a id="905" href="Interface.IsSet.html#611" class="Function">∈</a> <a id="907" href="Ledger.Transaction.html#4572" class="Function">scriptsP1</a> <a id="917" href="Interface.IsSet.html#611" class="Function">]</a> <a id="919" href="Ledger.Script.html#652" class="Function">validP1Script</a> <a id="933" href="Ledger.Utxow.Properties.html#727" class="Bound">witsKeyHashes</a> <a id="947" href="Ledger.Transaction.html#3858" class="Function">txvldt</a> <a id="954" href="Ledger.Utxow.Properties.html#903" class="Bound">s</a><a id="955" class="Symbol">)</a>
      <a id="963" href="Data.Product.Base.html#1109" class="Function Operator">×</a> <a id="965" href="Ledger.Utxow.html#830" class="Function">witsVKeyNeeded</a> <a id="980" href="Ledger.Utxo.html#5923" class="Function">ppolicy</a> <a id="988" href="Ledger.Utxo.html#6083" class="Function">utxo</a> <a id="993" href="Ledger.Utxow.Properties.html#629" class="Field">txb</a> <a id="997" href="Axiom.Set.html#1697" class="Function Operator">⊆</a> <a id="999" href="Ledger.Utxow.Properties.html#727" class="Bound">witsKeyHashes</a>
      <a id="1019" href="Data.Product.Base.html#1109" class="Function Operator">×</a> <a id="1021" href="Ledger.Utxow.html#940" class="Function">scriptsNeeded</a> <a id="1035" href="Ledger.Utxo.html#5923" class="Function">ppolicy</a> <a id="1043" href="Ledger.Utxo.html#6083" class="Function">utxo</a> <a id="1048" href="Ledger.Utxow.Properties.html#629" class="Field">txb</a> <a id="1052" href="Axiom.Set.html#2471" class="Function Operator">≡ᵉ</a> <a id="1055" href="Ledger.Utxow.Properties.html#780" class="Bound">witsScriptHashes</a>
      <a id="1078" href="Data.Product.Base.html#1109" class="Function Operator">×</a> <a id="1080" href="Ledger.Transaction.html#4135" class="Function">txADhash</a> <a id="1089" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1091" href="Interface.Functor.html#448" class="Function">map</a> <a id="1095" href="Interface.Hashable.html#195" class="Field">hash</a> <a id="1100" href="Ledger.Transaction.html#4762" class="Field">txAD</a>

    <a id="1110" class="Keyword">open</a> <a id="1115" href="Interface.ComputationalRelation.html#627" class="Module">Computational</a> <a id="1129" href="Ledger.Utxo.html#10708" class="Function">Computational-UTXO</a>
      <a id="1154" class="Keyword">renaming</a> <a id="1163" class="Symbol">(</a><a id="1164" href="Interface.ComputationalRelation.html#701" class="Field">computeProof</a> <a id="1177" class="Symbol">to</a> <a id="1180" class="Field">computeProof&#39;</a><a id="1193" class="Symbol">;</a> <a id="1195" href="Interface.ComputationalRelation.html#884" class="Field">completeness</a> <a id="1208" class="Symbol">to</a> <a id="1211" class="Field">completeness&#39;</a><a id="1224" class="Symbol">)</a>

    <a id="1231" href="Ledger.Utxow.Properties.html#1231" class="Function">computeProof</a> <a id="1244" class="Symbol">:</a> <a id="1246" href="Agda.Builtin.Maybe.html#118" class="Datatype">Maybe</a> <a id="1252" href="Function.Base.html#1994" class="Function Operator">$</a> <a id="1254" href="Data.Product.html#648" class="Function">∃</a> <a id="1256" class="Symbol">(</a><a id="1257" href="Ledger.Utxow.Properties.html#533" class="Bound">Γ</a> <a id="1259" href="Ledger.Utxow.html#1216" class="Datatype Operator">⊢</a> <a id="1261" href="Ledger.Utxow.Properties.html#535" class="Bound">s</a> <a id="1263" href="Ledger.Utxow.html#1216" class="Datatype Operator">⇀⦇</a> <a id="1266" href="Ledger.Utxow.Properties.html#537" class="Bound">tx</a> <a id="1269" href="Ledger.Utxow.html#1216" class="Datatype Operator">,UTXOW⦈_</a><a id="1277" class="Symbol">)</a>
    <a id="1283" href="Ledger.Utxow.Properties.html#1231" class="Function">computeProof</a> <a id="1296" class="Symbol">=</a>
      <a id="1304" href="Function.Base.html#4053" class="Function Operator">case</a> <a id="1309" href="Interface.Decidable.Instance.html#1079" class="Function Operator">¿</a> <a id="1311" href="Ledger.Utxow.Properties.html#550" class="Function">UTXOW-premise</a> <a id="1325" href="Interface.Decidable.Instance.html#1079" class="Function Operator">¿</a> <a id="1327" href="Function.Base.html#4053" class="Function Operator">of</a> <a id="1330" class="Symbol">λ</a> <a id="1332" class="Keyword">where</a>
        <a id="1346" class="Symbol">(</a><a id="1347" href="Relation.Nullary.Decidable.Core.html#1613" class="InductiveConstructor">yes</a> <a id="1351" class="Symbol">(</a><a id="1352" href="Ledger.Utxow.Properties.html#1352" class="Bound">p₁</a> <a id="1355" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1357" href="Ledger.Utxow.Properties.html#1357" class="Bound">p₂</a> <a id="1360" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1362" href="Ledger.Utxow.Properties.html#1362" class="Bound">p₃</a> <a id="1365" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1367" href="Ledger.Utxow.Properties.html#1367" class="Bound">p₄</a> <a id="1370" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1372" href="Ledger.Utxow.Properties.html#1372" class="Bound">p₅</a><a id="1374" class="Symbol">))</a> <a id="1377" class="Symbol">→</a>
          <a id="1389" href="Interface.Bifunctor.html#813" class="Function">map₂′</a> <a id="1395" class="Symbol">(</a><a id="1396" href="Ledger.Utxow.html#1520" class="InductiveConstructor">UTXOW-inductive</a> <a id="1412" href="Ledger.Utxow.Properties.html#1352" class="Bound">p₁</a> <a id="1415" href="Ledger.Utxow.Properties.html#1357" class="Bound">p₂</a> <a id="1418" href="Ledger.Utxow.Properties.html#1362" class="Bound">p₃</a> <a id="1421" href="Ledger.Utxow.Properties.html#1367" class="Bound">p₄</a> <a id="1424" href="Ledger.Utxow.Properties.html#1372" class="Bound">p₅</a><a id="1426" class="Symbol">)</a> <a id="1428" href="Interface.Functor.html#418" class="Field Operator">&lt;$&gt;</a> <a id="1432" href="Ledger.Utxow.Properties.html#1180" class="Function">computeProof&#39;</a> <a id="1446" href="Ledger.Utxow.Properties.html#533" class="Bound">Γ</a> <a id="1448" href="Ledger.Utxow.Properties.html#535" class="Bound">s</a> <a id="1450" href="Ledger.Utxow.Properties.html#537" class="Bound">tx</a>
        <a id="1461" class="Symbol">(</a><a id="1462" href="Relation.Nullary.Decidable.Core.html#1650" class="InductiveConstructor">no</a> <a id="1465" class="Symbol">_)</a> <a id="1468" class="Symbol">→</a> <a id="1470" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a>

    <a id="1483" href="Ledger.Utxow.Properties.html#1483" class="Function">completeness</a> <a id="1496" class="Symbol">:</a> <a id="1498" class="Symbol">∀</a> <a id="1500" href="Ledger.Utxow.Properties.html#1500" class="Bound">s&#39;</a> <a id="1503" class="Symbol">→</a> <a id="1505" href="Ledger.Utxow.Properties.html#533" class="Bound">Γ</a> <a id="1507" href="Ledger.Utxow.html#1216" class="Datatype Operator">⊢</a> <a id="1509" href="Ledger.Utxow.Properties.html#535" class="Bound">s</a> <a id="1511" href="Ledger.Utxow.html#1216" class="Datatype Operator">⇀⦇</a> <a id="1514" href="Ledger.Utxow.Properties.html#537" class="Bound">tx</a> <a id="1517" href="Ledger.Utxow.html#1216" class="Datatype Operator">,UTXOW⦈</a> <a id="1525" href="Ledger.Utxow.Properties.html#1500" class="Bound">s&#39;</a>
      <a id="1534" class="Symbol">→</a> <a id="1536" href="Data.Maybe.Base.html#2035" class="Function">M.map</a> <a id="1542" href="Data.Product.Base.html#608" class="Field">proj₁</a> <a id="1548" href="Ledger.Utxow.Properties.html#1231" class="Function">computeProof</a> <a id="1561" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1563" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="1568" href="Ledger.Utxow.Properties.html#1500" class="Bound">s&#39;</a>
    <a id="1575" href="Ledger.Utxow.Properties.html#1483" class="Function">completeness</a> <a id="1588" href="Ledger.Utxow.Properties.html#1588" class="Bound">s&#39;</a> <a id="1591" class="Symbol">(</a><a id="1592" href="Ledger.Utxow.html#1520" class="InductiveConstructor">UTXOW-inductive</a> <a id="1608" href="Ledger.Utxow.Properties.html#1608" class="Bound">p₁</a> <a id="1611" href="Ledger.Utxow.Properties.html#1611" class="Bound">p₂</a> <a id="1614" href="Ledger.Utxow.Properties.html#1614" class="Bound">p₃</a> <a id="1617" href="Ledger.Utxow.Properties.html#1617" class="Bound">p₄</a> <a id="1620" href="Ledger.Utxow.Properties.html#1620" class="Bound">p₅</a> <a id="1623" href="Ledger.Utxow.Properties.html#1623" class="Bound">h</a><a id="1624" class="Symbol">)</a>
      <a id="1632" class="Keyword">rewrite</a> <a id="1640" href="Relation.Nullary.Decidable.html#2677" class="Function">dec-yes</a> <a id="1648" href="Interface.Decidable.Instance.html#1079" class="Function Operator">¿</a> <a id="1650" href="Ledger.Utxow.Properties.html#550" class="Function">UTXOW-premise</a> <a id="1664" href="Interface.Decidable.Instance.html#1079" class="Function Operator">¿</a> <a id="1666" class="Symbol">(</a><a id="1667" href="Ledger.Utxow.Properties.html#1608" class="Bound">p₁</a> <a id="1670" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1672" href="Ledger.Utxow.Properties.html#1611" class="Bound">p₂</a> <a id="1675" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1677" href="Ledger.Utxow.Properties.html#1614" class="Bound">p₃</a> <a id="1680" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1682" href="Ledger.Utxow.Properties.html#1617" class="Bound">p₄</a> <a id="1685" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1687" href="Ledger.Utxow.Properties.html#1620" class="Bound">p₅</a><a id="1689" class="Symbol">)</a> <a id="1691" class="Symbol">.</a><a id="1692" href="Data.Product.Base.html#622" class="Field">proj₂</a>
      <a id="1704" class="Keyword">with</a> <a id="1709" href="Ledger.Utxow.Properties.html#1180" class="Function">computeProof&#39;</a> <a id="1723" href="Ledger.Utxow.Properties.html#533" class="Bound">Γ</a> <a id="1725" href="Ledger.Utxow.Properties.html#535" class="Bound">s</a> <a id="1727" href="Ledger.Utxow.Properties.html#537" class="Bound">tx</a> <a id="1730" class="Symbol">|</a> <a id="1732" href="Ledger.Utxow.Properties.html#1211" class="Function">completeness&#39;</a> <a id="1746" class="Symbol">_</a> <a id="1748" class="Symbol">_</a> <a id="1750" class="Symbol">_</a> <a id="1752" class="Symbol">_</a> <a id="1754" href="Ledger.Utxow.Properties.html#1623" class="Bound">h</a>
    <a id="1760" class="Symbol">...</a> <a id="1764" class="Symbol">|</a> <a id="1766" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="1771" class="Symbol">_</a> <a id="1773" class="Symbol">|</a> <a id="1775" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="1780" class="Symbol">=</a> <a id="1782" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre></body></html>